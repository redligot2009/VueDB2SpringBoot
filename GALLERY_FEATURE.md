# Gallery Management Feature

## Overview

The Gallery Management feature allows users to organize their photos into named galleries, providing a structured way to categorize and manage their photo collections. By default, all photos are placed in "Unorganized Photos" and can be moved to user-created galleries.

## Features

### 1. Gallery Organization
- **Default State**: All photos start in "Unorganized Photos"
- **User-Created Galleries**: Users can create custom galleries with names and descriptions
- **Photo Movement**: Photos can be moved between galleries or back to unorganized photos
- **Bulk Operations**: Support for moving multiple photos at once

### 2. Gallery Management
- **Create Galleries**: Users can create new galleries with custom names and descriptions
- **Edit Galleries**: Gallery names and descriptions can be updated
- **Delete Galleries**: Galleries can be deleted with options to:
  - Move all photos to "Unorganized Photos" (default)
  - Delete all photos in the gallery
- **Gallery Preview**: Each gallery shows the first 4 photos as a preview

### 3. Navigation Structure
- **Photos Page** (`/photos`): Main photo gallery with gallery filtering
- **Galleries Page** (`/galleries`): Overview of all user galleries
- **Gallery Detail** (`/gallery/:id`): View all photos in a specific gallery

## User Interface

### Photos Page (`/photos`)
- **Dynamic Title**: Shows current gallery name or "Unorganized Photos"
- **Gallery Filter**: Dropdown to filter photos by gallery
- **Photo Grid**: Displays photos with selection capabilities
- **Bulk Operations**: Select and move multiple photos between galleries
- **Pagination**: Navigate through large photo collections

### Galleries Page (`/galleries`)
- **Gallery Grid**: Shows all user galleries with preview images
- **Create Gallery**: Button to create new galleries
- **Gallery Cards**: Each card shows:
  - Preview of first 4 photos
  - Gallery name and description
  - Photo count and creation date
- **Empty State**: Encourages gallery creation when none exist

### Gallery Detail Page (`/gallery/:id`)
- **Breadcrumb Navigation**: Easy navigation back to galleries
- **Gallery Info**: Name, description, and metadata
- **Photo Management**: Full photo operations within the gallery
- **Gallery Actions**: Edit, delete, and move photos
- **Pagination**: Navigate through gallery photos

## Technical Implementation

### Backend Components

#### Database Schema
```sql
-- Galleries table
CREATE TABLE galleries (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description VARCHAR(500),
    user_id BIGINT NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP,
    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- Updated photos table
ALTER TABLE photos ADD COLUMN gallery_id BIGINT;
ALTER TABLE photos ADD CONSTRAINT fk_photos_gallery 
    FOREIGN KEY (gallery_id) REFERENCES galleries(id) ON DELETE SET NULL;
```

#### Key Entities
- **Gallery**: JPA entity with relationships to User and Photo
- **Photo**: Updated to include optional Gallery relationship
- **DTOs**: GalleryDto, CreateGalleryRequest, MovePhotosRequest

#### Services
- **GalleryService**: Business logic for gallery operations
- **PhotoService**: Updated to support gallery filtering

#### Controllers
- **GalleryController**: REST endpoints for gallery management
- **PhotoController**: Updated to support gallery filtering

### Frontend Components

#### Vue Components
- **PhotoGallery.vue**: Main photos page with gallery filtering
- **Galleries.vue**: Gallery overview page
- **GalleryDetail.vue**: Individual gallery view

#### State Management
- **PhotoStore**: Updated to support gallery filtering
- **ApiService**: Gallery API methods

#### Routing
```typescript
{
  path: '/photos',
  name: 'photos',
  component: PhotoGallery,
  meta: { requiresAuth: true }
},
{
  path: '/galleries',
  name: 'galleries',
  component: () => import('@/views/Galleries.vue'),
  meta: { requiresAuth: true }
},
{
  path: '/gallery/:id',
  name: 'gallery-detail',
  component: () => import('@/views/GalleryDetail.vue'),
  props: true,
  meta: { requiresAuth: true }
}
```

## API Endpoints

### Gallery Management
- `POST /api/galleries` - Create new gallery
- `GET /api/galleries` - Get user galleries
- `GET /api/galleries/{id}` - Get specific gallery
- `GET /api/galleries/{id}/preview` - Get gallery with preview photos
- `PUT /api/galleries/{id}` - Update gallery
- `DELETE /api/galleries/{id}` - Delete gallery
- `POST /api/galleries/move-photos` - Move photos between galleries
- `GET /api/galleries/dropdown` - Get galleries for dropdown

### Photo Management (Updated)
- `GET /api/photos?galleryId={id}` - Get photos filtered by gallery
- `GET /api/photos` - Get unorganized photos (no galleryId)

## Usage Examples

### Creating a Gallery
1. Navigate to "Galleries" page
2. Click "Create Gallery"
3. Enter gallery name and optional description
4. Click "Create Gallery"

### Moving Photos to Gallery
1. Go to "Photos" page
2. Select photos using selection mode
3. Click "Move Photos"
4. Choose target gallery from dropdown
5. Confirm move operation

### Viewing Gallery Photos
1. Navigate to "Galleries" page
2. Click on any gallery card
3. View all photos in that gallery
4. Use pagination to navigate through photos

### Deleting a Gallery
1. Open gallery detail page
2. Click "Delete Gallery"
3. Choose whether to move photos to unorganized or delete them
4. Confirm deletion

## Security Considerations

- **User Isolation**: Users can only access their own galleries
- **Photo Ownership**: Users can only move their own photos
- **Gallery Ownership**: Users can only modify their own galleries
- **Authentication Required**: All gallery operations require authentication

## Performance Optimizations

- **Lazy Loading**: Gallery components loaded on demand
- **Pagination**: Large photo collections paginated
- **Preview Images**: Only first 4 photos loaded for gallery previews
- **Database Indexes**: Optimized queries with proper indexing

## Future Enhancements

- **Gallery Sharing**: Share galleries with other users
- **Gallery Templates**: Pre-defined gallery types
- **Advanced Filtering**: Filter by date, tags, or other metadata
- **Gallery Collaboration**: Multiple users contributing to galleries
- **Gallery Export**: Export galleries as albums or collections
